<header class="site-header">
    <!-- Top Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <!-- Site Logo -->
            <a class="navbar-brand" href="{{ .Site.BaseURL }}">
                {{ if .Site.Params.logoImage }}
                    <img src="{{ .Site.Params.logoImage | relURL }}" alt="{{ .Site.Title }}" class="logo-img">
                {{ else }}
                    {{ .Site.Params.logo | default .Site.Title }}
                {{ end }}
            </a>

            <!-- Mobile Toggle Button -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" 
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Navigation Menu -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    {{ $currentPage := . }}
                    {{ range .Site.Menus.main }}
                    <li class="nav-item {{ if $currentPage.IsMenuCurrent "main" . }}active{{ end }}">
                        <a class="nav-link" href="{{ .URL | relURL }}">{{ .Name }}</a>
                    </li>
                    {{ end }}
                    <!-- Search Icon -->
                    <li class="nav-item">
                        <a class="nav-link search-toggle" href="#search">
                            <i data-feather="search"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Search Overlay -->
    <div id="search-overlay" class="search-overlay">
        <div class="search-container">
            <div class="search-header">
                <h3 class="search-title">Search</h3>
                <button id="close-search" class="close-search">
                    <i data-feather="x"></i>
                </button>
            </div>
            <form action="{{ "search" | absURL }}" class="search-form">
                <input type="search" name="q" placeholder="Type to search..." required>
            </form>
            <div class="search-footer">
                Press ESC to close search
                <div class="search-keyboard-shortcuts">
                    <span class="key">ESC</span>
                    <span>to close</span>
                    <span class="key">â†µ</span>
                    <span>to search</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Ad Banner Below Header -->
    {{ partial "adsense.html" (dict "position" "header-banner") }}
</header>
